# 02. 리소스의 위치와 트래픽 라우팅

## 인터넷 프로토콜 (IP)

- 인터넷이란? 전 세계의 개별 네트워크들을 TCP/IP 프로토콜로 연결한 거대한 네트워크
- 인터넷 프로토콜이란 네트워크, 특히 인터넷을 통해 전송되는 데이터의 포맷과 규칙들을 정의해놓은 프로토콜
- IP 주소는 TCP/IP 스택의 인터넷 계층에서 네트워크의 노드를 식별

## IPv4 주소 지정

- 옥텟(8비트)으로 구성된 네 개의 그룹으로 이루어진 32비트 숫자

- **네트워크 ID**
    - 패킷이 네트워크 장치에 어느 홉으로 가야 하는지 알려주는 역할
    - 그런 네트워크 장치가 **라우터**
- **호스트 ID**
    - 목적지 네트워크에 도달한 뒤 특정 수신자를 찾는 역할

- **서브넷**
    - 네트워크를 안전하게 유지하고 관리하기 위해 더 작은 네트워크로 세분.
        - 네트워크 간 정보의 흐름을 제어할 수 있다.
        - 예를 들어 퍼블릭/프라이빗 서비스에 따른 트래픽 허용/차단
    - 네트워크 내 존재하는 IP 주소의 개수 = 네트워크의 크기
    - **CIDR**을 통해 네트워크를 할당한다. 네트워크 접두사(표기 상 뒤에 붙지만 네트워크를 나타내기 때문에)를 IP 주소에 추가함.

    > cf. CIDR의 31비트 접두사는 Point-to-Point에서, 32비트 접두사는 단일 호스트를 나타낼 때 사용

- **포트**
    - 포트를 통해 다중화된 데이터 전송을 할 수 있다. 한 번에 여러 개의 노드와 통신 가능
    - `IP 주소 + 포트 번호 = 소켓 주소`
    - 16비트 양의 정수
        - 0 ~ 1023번까지는 IANA가 일반적으로 사용하는 서비스에 할당함. 49151까지는 덜 일반적인 서비스에 사용.

- **네트워크 주소 변환(NAT)**
    - IPv4 주소 부족을 해결
    - 수많은 노드들이 동일한 공인 IPv4 주소를 사용하여 네트워크를 사용할 수 있음
    - 연결한 내부망 클라이언트의 소켓 주소와 포트(유지 가능할 시)를 사용하여 대상 호스트와 통신 후 소켓 주소로 내부망 클라이언트를 찾아 응답 전달

- MAC 주소

    - 로컬 네트워크에서 실제로 데이터 프레임을 전달하는 건 MAC 주소
    - 타깃 IP는 종착지까지 안 바뀌지만 MAC 주소는 계속 바뀜. 라우터가 다음 홉을 찾을 때도 ARP를 통해 라우터의 MAC 주소를 알아내야 하기 때문

        - LAN 내부: ARP로 MAC 찾아서 프레임 전달

        - 네트워크 간: 라우터가 IP 주소로 라우팅 후, 새로운 MAC으로 다시 프레임 전송. 어떤 홉으로 갈지 정하는 건 ip 주소 라우팅 테이블이지만, 실제로 데이터 프레임을 보내려면 그 장치의 MAC 주소가 필요하기 때문에, ARP가 필요!

## IPv6 주소 지정

## 인터넷 제어 메시지 프로토콜

## 인터넷 트래픽 라우팅

## 라우팅 프로토콜

## 이름과 주소 해석