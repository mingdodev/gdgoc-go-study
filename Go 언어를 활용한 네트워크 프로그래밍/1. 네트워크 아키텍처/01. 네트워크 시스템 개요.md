# 01. 네트워크 시스템 개요

- **컴퓨터 네트워크**: 두 개 이상의 장치 또는 노드 간의 연결. 각 노드는 데이터를 공유한다.

> 장치(device)와 노드(node)를 구분하는 이유가 뭔가요? 노드는 물리적 개념부터 소프트웨어 프로세스까지 추상화한 범용적인 개념. 하나의 장치 내에 여러 개의 노드가 있을 수도 있음.

## 네트워크 토폴로지 선택하기

네트워크상의 노드 구성을 **네트워크 토폴로지**라고 한다.

- **점대점 (Point-to-Point)**

    - 두 노드가 하나의 연결을 공유
    - **daisy chai**n: 일련의 점대점 연결
        - **hop**: 출발지 노드와 목적지 노드 사이 중간 노드
    - 모던 네트워크에서 거의 안 씀

- **버스 (Bus)**

    - 연결된 모든 노드들이 트래픽을 받지만, 수신자를 확인하고 무시함
    - 유선보다 무선 네트워크에서 사용

- **링 (Ring)**

    - 데이터가 단일 방향으로 이동
    - 전체 속도가 특정 느린 노드 속도에 큰 영향을 받음
    - 광섬유 네트워크 배포

    > 광섬유는 설치 비용이 비싸기 때문에 하나 고장났을 때 전체가 멈추면 안 됨. 링형은 하나 끊겨도 반대 방향으로 전송이 가능하다는 장점. 또한 메쉬형처럼 모든 노드를 잇는 것도 아님.

- **스타 (Star)**

    - 중앙 노드(네트워크 스위치)와 다른 모든 노드의 점대점 연결
    - 중앙 노드가 발신 노드로부터 데이터를 받고 목적지 노드로 재전송
    - 데이터는 단 하나의 홉만 이동 (송수신 노드 빼고)
    - 장치를 스위치에 연결하는 것만으로 노드 추가 가능

- **그물 (Mesh)**

    - 모든 노드가 다른 모든 노드와 직접 연결
    - 단일 노드 장애가 다른 노드 간 트래픽에 영향 주지 않아 SPOF 제거
    - 노드 수 증가에 따른 비용, 복잡성 증가하므로 대규모 네트워크에 맞지 않음, 대규모 무선 네트워크만 가능

> 왜 어떤 문제가 발생하고 장점이 뭔지 이해

## 대역폭 vs. 레이턴시

- 대역폭(bandwith): 일정 시간 내 네트워크 연결을 통해 전송할 수 있는 데이터 양

- 레이턴시(latency): 네트워크 리소스 요청을 보내고 응답을 받는 사이 측정된 시간

    - CDN/클라우드 사용, 요청/응답 크기 최적화, 캐싱 전략 수립, 고루틴 등으로 레이턴시 문제를 해결하는 편

> 실제 사용자 경험이나 보안을 고려하면, 대역폭이 크다고 무조건 네트워크 성능이 좋다고 결론 지을 수 없다.

## Open Systems Interconnection (OSI) 참조 모델

- 1970년대 들어 네트워크가 점점 복잡해지면서 네트워킹을 표준화하기 위해 만든 모델. 프로토콜의 개발과 통신을 위한 프레임워크

- 프로토콜: 네트워크를 통해 전송되는 데이터의 포맷과 순서를 결정하는 규칙

- 예전만큼 쓰진 않는다.

- 7계층으로 추상화하여 사용

    - **애플리케이션**: 호스트를 식별하고 리소스를 검색
    - **프레젠테이션**: 데이터가 위/아래로 이동할 때 암호화, 암호 해독 및 데이터 인코딩
    - **세션**: 네트워크와 노드 간 연결 수명 주기를 관리
    - **전송**: 두 노드 간 데이터 전송을 제어하고 조정. (에러 수정, 데이터 청킹 및 분할, 누락된 데이터 재전송, 수신 데이터 확인 등)
    - **네트워크**: 노드 간 데이터를 전송. (라우팅, 주소 지정, 멀티캐스팅 및 트래픽 제어)
    - **데이터 링크**: 직접 연결된 두 노드 간의 데이터 전송을 처리.(시스템에서 스위치, 스위치에서 다른 시스템 등) 물리 계층의 에러를 식별하여 수정을 시도.
    - **물리**: 비트를 전기/광학/무선 신호로, 신호를 다시 비트로 변환. 비트 전송률(데이터의 최대 제한 속도)을 제어.

<br>

- 데이터가 스택을 따라 위로 이동할 때, 하위 계층에 의해 **캡슐화(필요한 정보만 노출)**된다. 각 레이어는 이전 레이어에서의 헤더 정보를 제거한다.

- 스택을 따라 이동하는 데이터를 **페이로드, 메시지 본문, 서비스 데이터 단위(SDU)**라고 한다.

    - 4계층: 세그먼트/데이터그램
    - 3계층: 패킷
    - 2계층: 프레임
    - 1계층: 비트

## TCP/IP 모델

- 종단 간 연결(end-to-end)을 원칙으로 한다.
- 견고한 구현을 권장한다. 세그먼트는 비트를 적절하게 전송하고 라우팅하기에 필요한 기능만을 포함하여, 그 외 모든 기능은 엔드포인트/송수신자의 네트워크 스택에 속한다.
- 실용화에 맞게 4계층으로 추상화

    - **애플리케이션**
        - TCP/IP의 프로토콜이 OSI 참조 모델의 5, 6, 7 계층 사이 경계를 자주 넘나들기 때문에 단순화
        - 소프트웨어 애플리케이션과 직접 상호 작용
    - **전송**
        - 두 노드 간의 데이터 전송 처리
        - 출발지부터 목적지까지 데이터 무결성(중복, 누락 데이터 없이 수신한 데이터의 순서가 정확함)을 보장
        - 에러 복구, 흐름 제어, 재전송 및 전송 확인 등

        > TCP 프로토콜은 3-way handshake가 세션 처리와도 유관하기 때문에, 5계층과도 일부 겹침. UDP는 세션 관리와 에러 검사 등은 애플리케이션에서 직접 구현해야 함.

    - **인터넷/네트워크**
        - 호스트 식별 및 라우팅. 어쨌든 데이터가 목적지에 도달하도록 보장하는 역할.
        - IPv4, IPv6, ICMP, IGMP, IPSec 등

    - **링크**
        - OSI 참조 모델의 데이터 링크, 물리 계층을 단순화
        - ARP(Address Resolution Protocol)가 노드의 IP 주소를 네트워크 인터페이스의 MAC 주소로 변환
        - 아날로그 모뎀의 경우 ISP에 직렬연결, 이때 링크 계층의 기능을 하기 위해 SLIP, PPP와 같은 프로토콜 사용.