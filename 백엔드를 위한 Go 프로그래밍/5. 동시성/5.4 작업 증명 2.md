# 5.4 작업 증명 2

- 블록체인의 '작업 증명' 알고리즘을 동시성 개념으로 최적화하자.

## 동시성을 도입하기 전 생각해보아야 할 부분들

- 동시성으로 인한 성능 향상은 반드시 오버헤드를 수반한다. 고루틴/스레드 생성, 컨텍스트 스위칭, 통신 및 스피닝 등으로 인한 오버헤드, 그리고 캐시 무효화를 일으키는 기능을 실수로 구현하는 것에 주의해야 한다.

- 고루틴을 사용한다고 해서 꼭 성능이 향상된다고 보장할 수 없다. 오히려 대부분은 싱글 스레드 코드가 멀티 스레드 코드보다 좋은 성능을 발휘한다.

## Data Race

```go
go run -race .
```
- 데이터 레이스 디텍터
- 여러 고루틴이 같은 슬라이스/맵/구조체 필드를 쓰면 경합 발생하겠지~!~!